(()=>{"use strict";function t(t,e){if(e)for(const n in e)t.setAttribute(n,e[n])}function e(e,n,o){const r=document.createElementNS("http://www.w3.org/2000/svg",e);return o?.forEach((t=>r.classList.add(t))),t(r,n),r}function n(t,n,o,r){const i=n.map((t=>`${t.x},${t.y}`)).join(" ");o.points=i;const u=e("polygon",o,r);return t.append(u),u}function o(t,n,o,r){o.cx=n.x,o.cy=n.y;const i=e("circle",o,r);return t.append(i),i}const r={golfBallAttributes:{r:2,fill:"black",opacity:.5},boundaryAttributesOuter:{stroke:"black","stroke-width":6,fill:"none"},boundaryAttributesInner:{stroke:"white",fill:"white"},obstacleAttributes:{stroke:"white",fill:"black"}};r.boundaryAttributesInner["stroke-width"]=0,r.obstacleAttributes["stroke-width"]=0;const i=document.querySelector("#game-container"),u=function(t,i){const u=t.boundary,c=t.obstacles,s=e("g",null,["course-container"]);function a(){n(s,u,r.boundaryAttributesOuter,["course-boundary","course-boundary-outer"]),n(s,u,r.boundaryAttributesInner,["course-boundary","course-boundary-inner"]),u.forEach((t=>o(s,t,{r:.5,fill:"red","stroke-width":0}))),c?.forEach((t=>{n(s,t,r.obstacleAttributes,["course-obstacle"]),t.forEach((t=>o(s,t,{r:.5,fill:"blue","stroke-width":0})))}))}return i.append(s),{draw:a,initialize:function(){a()},getBoundaryVertices:function(){return u},getObstacles:function(){return c}}}({boundary:[{x:10,y:40},{x:30,y:40},{x:30,y:45},{x:65,y:45},{x:65,y:40},{x:90,y:40},{x:90,y:60},{x:65,y:60},{x:65,y:55},{x:30,y:55},{x:30,y:60},{x:10,y:60}],obstacles:[[{x:15,y:45},{x:25,y:45},{x:25,y:55},{x:15,y:55}]]},i);u.initialize();const c=function(e,n,i,u){let c,s=e,a=n,l=i;const f=function(t){const e=t.createSVGPoint();return function(n){return e.x=n.x,e.y=n.y,e.matrixTransform(t.getScreenCTM().inverse())}}(u);function y(){c=o(u,s,r.golfBallAttributes,["golf-ball"])}function d(e){s=e,function(e,n){t(e,{cx:n.x,cy:n.y})}(c,s)}return{initialize:function(){y(),function(){function t(t){d(f({x:t.clientX,y:t.clientY}))}function e(){u.removeEventListener("mousemove",t),u.removeEventListener("mouseup",e)}c.addEventListener("mousedown",(function(){u.addEventListener("mousemove",t),u.addEventListener("mouseup",e)}))}()},draw:y,getPosition:function(){return s},setPosition:d,getSpeed:function(){return a},setSpeed:function(t){a=t},getDirection:function(){return l},setDirection:function(t){l=t}}}({x:20,y:20},2,1,i);c.initialize(),function(t,e){const n=t.getBoundaryVertices();n.push(n[0]);let o=[];for(let t=1;t<n.length;t++)o.push({start:n[t-1],end:n[t]});t.getObstacles()?.forEach((t=>{t.push(t[0]);for(let e=1;e<t.length;e++)o.push({start:t[e-1],end:t[e]})})),console.log(o)}(u)})();