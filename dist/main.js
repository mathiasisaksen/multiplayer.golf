(()=>{"use strict";function t(t,e){if(e)for(const n in e)t.setAttribute(n,e[n])}function e(e,n,o){const r=document.createElementNS("http://www.w3.org/2000/svg",e);return o?.forEach((t=>r.classList.add(t))),t(r,n),r}function n(t,n,o,r){const i=n.map((t=>`${t.x},${t.y}`)).join(" ");o.points=i;const s=e("polygon",o,r);return t.append(s),s}function o(t,n,o,r){o.cx=n.x,o.cy=n.y;const i=e("circle",o,r);return t.append(i),i}const r={golfBallAttributes:{r:2,fill:"black",opacity:.5},boundaryAttributesOuter:{stroke:"black","stroke-width":6,fill:"none"},boundaryAttributesInner:{stroke:"white",fill:"white"},obstacleAttributes:{stroke:"white",fill:"black"}};r.boundaryAttributesInner["stroke-width"]=0,r.obstacleAttributes["stroke-width"]=0;const i=document.querySelector("#game-container"),s=function(t,i){const s=t.boundary,c=t.obstacles,u=e("g",null,["course-container"]);function a(){n(u,s,r.boundaryAttributesOuter,["course-boundary","course-boundary-outer"]),n(u,s,r.boundaryAttributesInner,["course-boundary","course-boundary-inner"]),s.forEach((t=>o(u,t,{r:.5,fill:"red","stroke-width":0}))),c?.forEach((t=>{n(u,t,r.obstacleAttributes,["course-obstacle"]),t.forEach((t=>o(u,t,{r:.5,fill:"blue","stroke-width":0})))}))}return i.append(u),{draw:a,initialize:function(){a()},getBoundaryVertices:function(){return s},getObstacles:function(){return c}}}({boundary:[{x:10,y:40},{x:30,y:40},{x:30,y:45},{x:65,y:45},{x:65,y:40},{x:90,y:40},{x:90,y:60},{x:65,y:60},{x:65,y:55},{x:30,y:55},{x:30,y:60},{x:10,y:60}],obstacles:[[{x:15,y:45},{x:25,y:45},{x:25,y:55},{x:15,y:55}]]},i);s.initialize();const c=function(e,n,i,s){let c,u=e,a=n,l=i;const f=function(t){const e=t.createSVGPoint();return function(n){return e.x=n.x,e.y=n.y,e.matrixTransform(t.getScreenCTM().inverse())}}(s);function y(){c=o(s,u,r.golfBallAttributes,["golf-ball"])}function d(e){u=e,function(e,n){t(e,{cx:n.x,cy:n.y})}(c,u)}return{initialize:function(){y(),function(){function t(t){d(f({x:t.clientX,y:t.clientY}))}function e(){s.removeEventListener("mousemove",t),s.removeEventListener("mouseup",e)}c.addEventListener("mousedown",(function(){s.addEventListener("mousemove",t),s.addEventListener("mouseup",e)}))}()},draw:y,getPosition:function(){return u},setPosition:d,getSpeed:function(){return a},setSpeed:function(t){a=t},getDirection:function(){return l},setDirection:function(t){l=t}}}({x:20,y:20},2,1,i);c.initialize(),function(t,e){const n=t.getBoundaryVertices();n.push(n[0]);let o=[];for(let t=1;t<n.length;t++)o.push({start:n[t-1],end:n[t]});t.getObstacles()?.forEach((t=>{t.push(t[0]);for(let e=1;e<t.length;e++)o.push({start:t[e-1],end:t[e]})})),console.log(o),setInterval((function(){const t=e.getPosition(),n=e.getSpeed(),o=e.getDirection();console.log("speed",n),console.log("direction",o);let r={};r.x=n*Math.cos(o),r.y=n*Math.sin(o);const i=(c=r,{x:(s=t).x+c.x,y:s.y+c.y});var s,c;e.setPosition(i)}),100)}(s,c)})();